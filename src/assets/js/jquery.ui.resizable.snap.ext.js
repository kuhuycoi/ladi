!function(t){function e(t,e,i){return Math.abs(t)<i?-t:Math.abs(e)<i?-e:0}function i(t){return t.sort(function(t,e){return t?e?Math.abs(t)-Math.abs(e):-1:1})[0]}function s(t){return parseInt(t.css("margin-left"),10)||0}function h(t){return parseInt(t.css("margin-top"),10)||0}function r(e,i,s){var h=t.ui.resizable.prototype[e];t.ui.resizable.prototype[e]=function(){s&&s.apply(this,arguments),h.apply(this,arguments),i&&i.apply(this,arguments)}}t.extend(t.ui.resizable.prototype.options,{snapTolerance:20,snapMode:"both"}),t.ui.plugin.add("resizable","snap",{start:function(){var e=t(this),i=e.data("ui-resizable"),r=i.options.snap;i.ow=i.helper.outerWidth()-i.size.width,i.oh=i.helper.outerHeight()-i.size.height,i.lm=s(e),i.tm=h(e),i.coords=[],t("string"==typeof r?r:":data(ui-resizable)").each(function(){if(this!=i.element[0]&&this!=i.helper[0]){var e=t(this),r=e.position(),n=r.left+s(e),o=r.top+h(e);i.coords.push({l:n,t:o,r:n+e.outerWidth(),b:o+e.outerHeight()})}})},resize:function(){var s=[],h=[],r=[],n=[],o=t(this).data("ui-resizable"),a=o.axis.split(""),p=o.options.snapTolerance,l=o.options.snapMode,u=o.position.left+o.lm,c=u-p,f=o.position.top+o.tm,g=f-p,d=u+o.size.width+o.ow,z=d+p,b=f+o.size.height+o.oh,w=b+p;if(t.each(o.coords,function(){var i=this,o=Math.min(z,i.r)-Math.max(c,i.l),m=Math.min(w,i.b)-Math.max(g,i.t);o<0||m<0||t.each(a,function(t,a){if("outer"==l)switch(a){case"w":case"e":if(o>2*p)return;break;case"n":case"s":if(m>2*p)return}else if("inner"==l)switch(a){case"w":case"e":if(o<2*p)return;break;case"n":case"s":if(m<2*p)return}switch(a){case"w":s.push(e(u-i.l,u-i.r,p));break;case"n":h.push(e(f-i.t,f-i.b,p));break;case"e":r.push(e(d-i.l,d-i.r,p));break;case"s":n.push(e(b-i.t,b-i.b,p))}})}),n.length&&(o.size.height+=i(n)),r.length&&(o.size.width+=i(r)),s.length){var m=i(s);o.position.left+=m,o.size.width-=m}if(h.length){m=i(h);o.position.top+=m,o.size.height-=m}}}),r("_mouseStop",null,function(){this._helper&&(this.position={left:parseInt(this.helper.css("left"),10)||.1,top:parseInt(this.helper.css("top"),10)||.1},this.size={width:this.helper.outerWidth(),height:this.helper.outerHeight()})}),r("_mouseStart",function(){this._helper&&(this.size={width:this.size.width-(this.helper.outerWidth()-this.helper.width()),height:this.size.height-(this.helper.outerHeight()-this.helper.height())},this.originalSize={width:this.size.width,height:this.size.height})}),r("_renderProxy",function(){this._helper&&this.helper.css({left:this.elementOffset.left,top:this.elementOffset.top,width:this.element.outerWidth(),height:this.element.outerHeight()})});var n=t.ui.resizable.prototype.plugins.resize;t.each(n,function(t,e){if("ghost"==e[0])return n.splice(t,1),!1}),t.each(t.ui.resizable.prototype.plugins.start,function(e,i){if("ghost"==i[0]){var s=i[1];return i[1]=function(){s.apply(this,arguments),t(this).data("ui-resizable").ghost.css({width:"100%",height:"100%"})},!1}})}(jQuery);